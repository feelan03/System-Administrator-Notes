# Регулярные выражение 
## PCRE-регулярные выражения
**Формат шаблона регулярного выражения:**
```
/шаблон/​модификатор
```
**Модификаторы**

* g – глобальный поиск;
* i – не учитывать регистр;
* m – многострочный.

**Спец. символы**
* ^ - начало строки;
* $ -конец строки.

**Экранирование**
* /./g — один любой символ;
* /\w/g — один буквенно-цифровой символ и _;
* /\d/g — одна цифра;
* /\s/g — пробел или его эквивалент (табуляция, перевод строки);
* /\D/g — то, что не является цифрой;
* \W/g— то, что не является буквенно-цифровым символом;
* /\S/g — то, что не является пробелом;
* \b используется,чтобы обозначить начало или конец слова (т.е. символ стоит перед или после пробела);
* /a\b/g — подсветит все конечные буквы последовательно.

*Пример:*
```
na dra nva sta
```
* /\bn/g подсветит все начальные буквы n;
* \B позволяет находить не начальные и не конечные символы.

**Повторы:**
* Если 0 и более раз, используем *.
* Если 1 и более раз, используем +.
* Если 0 или 1 раз, используем ?.
* /sa+/g — подойдут «sa saa saaa».
* /sa*/g — подойдут «s sa saaa».
* /sa?/g — подойдут «s sa».

*Жадный берет максимально возможное вхождение, нежадный — минимально.*
* /.*\.txt/ для строки *«text.txt.txt»* выделит всю строку;
* /.*?\.txt/ выделит «text.txt».

**Варианты с произвольным повторением:**
* /\w{3}/g строго три алфавитно-цифровых символа;
* /\w{1,3}/g от 1 до 3 символа;
* /\w{0,3}/g от 0 до 3;
* /\w{3,}/g три и более.

**Вариант из нескольких выборов:**
```
/.+\.(doc|docx)/​g
```
*Имя файла состоит из нескольких символов, точки и расширений — doc или docx.*

**Вариант выбора нескольких символов:**
* /[ab]*/g — только символы a и b;
* /[a|b]*/g — только символы a,b и | (здесь он простой символ);
* /[ab-]*/g — символы a,b и тире;
* /[a-e]*/g — символы от a до e;
* /[a-e-]*/g — символы от a до e и тире.

*Проверитьподстрокунасоответствиеиопределитьеёвтороевхождение.Выделяемподстрокув(подстрока),азатемееследующеевхождениеопределяемкак\1.Еслиестьвтороевхождение,тоследующее как \2. Такие скобки (http|https) тоже считаются:*
```
/<(a|strong).*>.*<\/\1>/​g
```
*Косая черта экранируется, например, http:// будет как http:\ / \ /. (только слитно)*

Пример:
```
<a​​href​=​ya.ru​>​test​</a>​ is  not ​<strong>​google​</strong>
```

**Просмотр назад (позитивный поиск назад)**
```
(?<=шаблон​1​)шаблон2
```
*Шаблон2 будет соответствовать, если ему предшествует шаблон1. Пример:*
```
(?<=​ip​=)​127​\.​0​\.​0​\.1
```
*ip=​127.0.0.1​ — соответствует, а просто 127.0.0.1 — нет. Выделено будет 127.0.0.1*

**Просмотр назад с отрицанием (негативный поиск назад)**
```
(?<!шаблон​1​)шаблон2
```
Шаблон2 будет соответствовать, если ему не предшествует шаблон1. Пример:
```
(?<!​ip​=)​127​\.​0​\.​0​\.1
```
*ip=127.0.0.1 несоответствует, аaddr=​127.0.0.1 соответствует, как и ​127.0.0.1​. Выделено будет 127.0.0.1  Это просмотр назад.*

**Просмотр вперед (позитивный поиск вперед)**
```
Шаблон​1​(?=шаблон​2)
```
*Будет искать шаблон1, если после него следует шаблон2.
Под этот шаблон подойдут ​ipaddr​=127.0.0.1 и ​ip​=127.0.0.1, а просто ip или ip=1.2.3.4 — нет.*
```
\w​+=(?=​127​\.​0​\.​0​\.​1​)
```
*Выделено будет ipaddr и ip соответственно.*
